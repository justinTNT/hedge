name = "hedge"
main = "worker-entry.js"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Local development
[dev]
port = 8787
local_protocol = "http"

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "hedge-db"
database_id = "a215d0da-0471-4ed2-b421-f1b0a9df30f3"

# KV Namespace for sessions (optional)
# [[kv_namespaces]]
# binding = "KV"
# id = "your-kv-id"

# Durable Objects
[durable_objects]
bindings = [
    { name = "EVENTS", class_name = "EventHub" }
]

[[migrations]]
tag = "v1"
new_sqlite_classes = ["EventHub"]

# R2 blob storage
[[r2_buckets]]
binding = "BLOBS"
bucket_name = "hedge-blobs"

# Static assets (index.html, CSS, JS, images)
[assets]
directory = "./_site"
html_handling = "auto-trailing-slash"
not_found_handling = "single-page-application"

# Environment variables
[vars]
ENVIRONMENT = "development"
ADMIN_KEY = "dev-admin-key"
